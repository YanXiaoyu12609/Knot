# Knot - 文献管理与分析工具

一个现代化的学术文献管理与 AI 分析系统，基于 Next.js 构建，提供完整的文献管理、阅读、分析和可视化功能。

---

## 核心功能概览

### 📚 文献管理

#### 文献导入
- **拖拽导入**: 支持直接拖拽 PDF 文件到界面进行导入
- **批量导入**: 可同时导入多个 PDF 文件
- **自动元数据提取**: 自动从 PDF 中提取标题、作者、年份等元数据
- **DOI 识别**: 自动识别和提取 DOI 信息
- **参考文献解析**: 自动提取 PDF 中的参考文献列表

#### 文献组织
- **文集管理** (Collections):
  - 创建多层级文集分类
  - 支持子文集嵌套
  - 拖拽移动文献到不同文集
  - 重命名和删除文集
  - 递归删除子文集
  
- **筛选与过滤**:
  - "我的文库" - 显示所有文献
  - "未归档项目" - 未分配到文集的文献
  - "废纸篓" - 已删除的文献
  - 按文集筛选显示

#### 文献列表视图
- **多列显示**:
  - 标题 (Title)
  - 作者 (Creators)
  - 年份 (Year)
  - 出版物 (Publication)
  - 添加日期 (Date Added)
  
- **自定义列**: 可选择显示/隐藏特定列
- **多种排序**: 支持按任意列正序/倒序排序
- **智能搜索**: 按标题、作者等字段搜索文献

---

### 📖 文献阅读

#### PDF 查看器
- **内置 PDF 阅读器**: 无需外部工具即可阅读 PDF
- **页面导航**: 支持翻页、跳转到指定页
- **缩放控制**: 放大/缩小/适应页面
- **多文档支持**: 可为每篇文献附加多个 PDF 文件

#### 文献详情面板
- **完整元数据编辑**:
  - 标题 (Title)
  - 作者列表 (Creators) - 姓、名分别编辑
  - 摘要 (Abstract)
  - 出版物 (Publication)
  - 出版年份 (Year)
  - DOI
  - URL
  - 添加日期
  - 标签 (Tags)
  
- **附件管理**:
  - 查看所有附件
  - 预览 PDF 附件
  - 删除附件

- **参考文献列表**:
  - 显示从 PDF 提取的参考文献
  - 点击参考文献可查看详情
  - 链接到已导入的参考文献

---

### 🤖 AI 智能分析

#### 分析功能
- **一键 AI 分析**: 使用 Google Gemini AI 深度分析学术论文
- **结构化输出**: 按预设模板生成格式化分析报告
- **进度追踪**: 实时显示分析进度和预估时间
- **智能缓存**: 记录分析历史，避免重复分析

#### 分析内容包括
1. **研究问题与背景**:
   - 核心问题
   - 研究动机与重要性
   
2. **方法论**:
   - 核心解决思路
   - 关键步骤与流程
   - 原理、数据、公式深度分析
   
3. **实验设计、数据与验证**:
   - 实验设置
   - 核心结果与数据
   - 性能对比与优势
   
4. **核心创新与贡献**:
   - 方法/模型创新
   - 理论贡献
   - 实验证明或性能突破
   
5. **局限性与未来工作**:
   - 当前局限
   - 可能的改进空间
   - 进一步探索的方向
   
6. **参考文献列表**: 自动提取的结构化参考文献

#### 分析界面
- **浮动窗口**: 可独立移动和调整大小
- **Markdown 渲染**: 支持完整 Markdown 格式显示
- **导出功能**:
  - 导出为 Markdown 文件
  - 包含 YAML frontmatter (标题、作者、年份、DOI 等)
  - 适配 Obsidian 等笔记工具
  
- **元数据同步**: 分析结果可自动更新文献元数据

---

### 🔗 知识图谱

#### 引用关系可视化
- **交互式力导向图**: 使用 Force Graph 展示文献引用关系
- **节点类型**:
  - 当前文献高亮显示
  - 被引用文献
  - 引用的文献
  - 作者节点
  - 标签节点
  
- **关系连接**:
  - 引用关系 (citation)
  - 作者关系 (author)
  - 标签关系 (tag)
  - 共同出版物关系 (publication)

#### 图谱交互
- **缩放控制**: 放大/缩小/自适应视图
- **节点点击**: 点击节点查看对应文献详情
- **悬停信息**: 显示节点类型和名称
- **过滤器**:
  - 按节点类型过滤 (文献/作者/标签/出版物)
  - 搜索特定作者

---

### 🎨 用户界面

#### 主题系统
- **明暗主题切换**: 支持日间/夜间模式
- **精美 UI 设计**:
  - 现代化卡片式设计
  - 流畅的动画过渡
  - 清晰的视觉层次
  - 响应式布局

#### 快捷键支持
- **Ctrl/Cmd + K**: 快速搜索
- **ESC**: 关闭面板/取消操作
- **Delete**: 删除选中项

#### 设置面板
- **API 配置**: 配置 Google Gemini API Key
- **模型选择**: 选择 AI 分析使用的模型
- **本地存储**: 所有数据存储在浏览器 IndexedDB 中

---

## 技术特性

### 数据管理
- **IndexedDB 存储**: 使用 Dexie.js 管理本地数据库
- **实时更新**: 使用 useLiveQuery 实现响应式数据
- **离线支持**: 完全离线可用，无需网络连接（除 AI 分析外）

### 文件处理
- **PDF.js 集成**: 完整的 PDF 渲染和文本提取能力
- **Blob 存储**: 高效存储和管理 PDF 文件
- **元数据提取**: 智能提取 PDF 元数据和参考文献

### AI 集成
- **Google Gemini API**: 使用最新的 Gemini 2.0 Flash 模型
- **流式处理**: 支持流式响应（可选）
- **错误处理**: 完善的错误捕获和用户提示

### 引用解析
- **Citation.js**: 使用标准库解析引用格式
- **智能匹配**: 自动匹配已导入文献与参考文献
- **多格式支持**: 支持多种引用格式识别

---

## 数据结构

### 核心实体

#### ReferenceItem (文献)
- id, title, creators, abstract
- publication, year, doi, url
- dateAdded, tags, collections
- attachments, references, analysis

#### Collection (文集)
- id, name, parentId, order
- createdAt

#### Attachment (附件)
- id, referenceId, title, path
- fileType, fileSize, fileData

#### ParsedReference (解析的参考文献)
- referenceId, authors, title
- year, doi, matchedItemId

---

## 已知限制

1. **浏览器存储限制**: 受浏览器 IndexedDB 存储配额限制
2. **PDF 大小**: 超大 PDF 文件可能影响性能
3. **参考文献提取**: 依赖 PDF 格式质量，部分 PDF 可能提取不准确
4. **AI 分析**: 需要有效的 Google Gemini API Key
5. **网络依赖**: AI 分析功能需要网络连接

---

## 未来计划

- [ ] 云端同步功能
- [ ] 笔记和高亮功能
- [ ] 更多 AI 模型支持
- [ ] 文献引用生成器
- [ ] 批量编辑功能
- [ ] 高级搜索过滤器
- [ ] 导出和备份功能
- [ ] 移动端适配

---

## 常见使用场景

1. **研究文献管理**: 导入、分类和组织研究论文
2. **快速文献综述**: 使用 AI 快速理解论文核心内容
3. **引用关系探索**: 通过知识图谱发现文献间的联系
4. **写作辅助**: 提取参考文献，辅助论文写作
5. **知识积累**: 构建个人学术知识库
